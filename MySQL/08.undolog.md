# undo log

**作用**

保存了事务发生之前的数据的一个版本，可以用于回滚，同时可以提供多版本并发控制下的读（MVCC），即非锁定读

**内容**

逻辑格式的日志，在执行undo的时候，仅仅是将数据从逻辑上恢复至事务之前的状态，而不是从物理页上面操作实现的，
这一点与redolog不同

**产生时间**

事务开始之前，将当前的版本生成undo log，undo也是产生redo来保证undo log的可靠性

**释放时间**

当事务提交之后，undo log并不能立马被删除，而是放入待清理的链表，有purge线程判断是否由其他事务在使用undo段中标的上一个事务之前的版本信息，决定是否清理undo log的日志空间

**物理文件**

mysql5.6之前，undo表空间位置共享表空间的回滚段中，共享表空间的默认名称是ibdata，位于数据文件目录中

mysql5.6之后，undo表空间可以配置成独立的文件，需要在数据库初始化之前，通过配置文件配置
