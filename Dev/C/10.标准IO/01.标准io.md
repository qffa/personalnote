# 标准IO

## 标准io

不同OS所提供的OS API不尽相同，尽管有POSIX、BSD等标准来统一的规定OS的接口，要求所有OS应该提供相同的API（应用编程的函数接口），以方便上层编写应用程序的人调用。

事实上不同的OS所提供的接口都有差异，为了屏蔽这种差异，基于文件IO函数（API）的基础又封装了一层库函数，这就标准IO函数，由c标准库提供。

有了这个标准IO函数后，不管在什么平台上，标准IO函数的用法都是一样的，至于与不同OS的文件IO函数的对接，这件事就由标准io函数来实现，编写应用程序的人无需关心。

标准IO与文件IO的关系

```mermaid
graph TB
  subgraph 调用关系
    id1(应用程序) --> id2
    id2(标准IO) --> id3
    id3(文件IO) --> id4
    id4(操作系统)
 end
```

c标准IO函数的功能和实现细节都是有统一规范的，由ANSI C这个专门制定各种标准的组织来制定。不同的OS都会有自己的文件IO函数，基于不同OS运行的标准IO函数，会封装对接该OS的文件IO函数。

## 标准IO函数库

基于OS运行时，标准IO库大多都是动态库，在裸机上运行时标准IO库则是静态库。

“标准IO库”属于“C标准库”的一部分，使用标准IO函数时必须包含`stdio.h`头文件，因为调用标准IO函数所需的函数声明、相关宏定义、结构体类型定义等等都在`stdio.h`中

## 常用标准io函数

打开、关闭文件

- `fopen`：打开文件
- `fclose`：关闭文件

输出函数

- `fprintf`, `printf`, `sprintf`：格式化输出
- `fputc`, `putc`, `putchar`：输出一个字符
- `fputs`, `puts`：输出字符串
- `fwrite`：输出二进制数据

输入函数

- `fscanf`, `scanf`：格式化输入
- `fgetc`, `getc`, `getchar`：输入一个字符
- `fgets`, `gets`：输入字符串
- `fread`：输入二进制数据

调整读写位置函数

- `fseek`：调整文件读写指针位置
- `ftell`：返回文件读写指针位置
- `rewind`：将文件读写指针调整到文件头部

其他

- `fflush`：刷新标准io缓存
- `feof`：判断是否读到了文件末尾


说明

- 标准IO输出函数和输入函数那么多，但实际上对接的只有个两个函数，`read`和`write`所有的输入函数都是基于`read`封装得到，所有的输出函数都是基于`write`封装得到

- `feof`和`fflush`是一个纯粹的库函数，不对应任何OS API

## 安装标准库man手册

```
$ yum install man-pages.noarch
```
