# 位运算介绍

数据在计算机中都是二进制形式的，位操作就是，可以通过`&`, `|`, `^`等位操作符号，修改二进制数据中的每一位。

## 位操作

**常见的位操作符**

| Operator | Description |
|:-------- |:----------- |
| `&`      | and         |
| `|`      | or          |
| `^`      | xor         |
| `~`      | not         |
| `<<`     | shift left  |
| `>>`     | shift right |


**位操作的意义**

c语言会经常用在底层硬件的开发上，而控制硬件则是通过“位操作”去读写寄存器来实现的。

**注意**

只能对整形数（有符号、无符号）进行位操作。无法对浮点数进行位操作。

## 位与运算

运算符：`&`

**运算规则**

- 两个位都为`1`时，结果为`1`
- 只要有一个为`0`，结果就为`0`

**例子**

```
char a = 3;
char b = 6;
char c = a & b;

/* 计算过程 */
   00000011   // 3
&  00000110   // 6
=  00000010   // 2
```

## 位或运算

运算符：`|`

**运算规则**

- 两个位都位`0`时，结果为`0`
- 只要有一个为`1`，结果就为`1`

**例子**

```
char a = 3;
char b = 6;
char c = a | b;

/* 计算过程 */
   00000011  // 3
|  00000110  // 6
=  00000111  // 7
```

## 取反

运算符：`~`

**运算规则**

- `0`取反变`1`
- `1`取反变`0`

**例子**

```
char a = 6;
char b = ~a;

/* 运算过程 */
~  00000011  // 6
=  11111100  // 249
```

## 异或

运算符：`^`

**运算规则**

- 两位相同则为`0`
- 两位不同则为`1`

**例子**

```
char a = 3;
char b = 6;
char c = a ^ b;

/* 运算过程 */
   00000011  // 3
^  00000110  // 6
=  00000101  // 5
```

## 左移

运算符：`<<`

**运算规则**

- 将操作数各个位向左移动若干位，溢出的二进制位丢弃，右边空出的位则补`0`

**例子**

```
char a = 195;
char b =a << 5;

/* 运算过程 */
          76543210   //位编号
<<        00000011   //操作数
     00000011        //向左移动5位
          01100000   //左侧溢出，右侧补0
```

**左移时的x2规律**

在没有“有效位(为1的位)”被溢出丢弃之前，每左移一位就是对数据*2。可以想象以下十进制左移一位就是乘以10

```
char a = 4;
char b = a << 3;

b = 00000100 << 3  // 4 * 2 * 2 * 2
b = 00100000  // 32
```

## 右移

运算符： `>>`

**运算规则**

将操作数各个位向右移动若干位，右边溢出的二进制位会被丢弃，左边空出的位则补`0`或补`1`

- 无符号数和有符号正整数，补`0`
- 有符号负数，补`1`

**例子**

```
char a = 75;
char b = a >> 5;

/* 运算过程 */
     76543210       //位编号
>>   01001011       //操作数
          01001011  //右移位
     00000010       //右侧溢出，左侧补0
```

**右移时的除2规律**

在没有丢弃有效数据之前，每右移1位，就是对数据做一次/2操作

```
char a = 112;  // 01110000
char b = a >> 3;  

b = 01110000 >> 3;  // 112/2/2/2
b = 00001110   // 14
```
