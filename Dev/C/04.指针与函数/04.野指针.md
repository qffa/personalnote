# 野指针

所谓野指针就是，指针（地址）是一个随机值，这个随机值会指向任何可能的空间，这就是野指针。

**野指针的危害**

1. 指针没有对应任何的真实存储空间
2. 指针指向其他空间
    - 其他空间不允许操作
    - 允许操作，将会导致数据篡改

**解决野指针的问题**

1. 使用指针之前，记得赋值一个合法指针
2. 定义指针变量时，初始化

**指针变量初始化**

```
int a = 10;
int *p1 = &a;

int *p2 = NULL;  // 不知道初始化为什么的时候，给个空指针
```
*不初始化，局部变量指针就称为随机值了。*

**严谨的使用指针**

使用前，先判断指针是否为空

```
int *p = NULL;

if (NULL != p) {
    *p = 200;
}
```

*所有指针都判断的话，会比较麻烦。不过对于特别重要的指针，我们还是可以加上这样的判断的。*

**空指针**

定义在c标准库`stddef.h`中
```
#if defined(__cplusplus)  
    #define NULL 0  
#else                      
    #define NULL ((void *)0)
#endif
```

对C来说`NULL`为`(void *)0`
`NULL`就是`0`地址，不能被访问，解引用`NULL`时，会导致指针错误。

**segment fault 段错误**

segment fault是，Linux下，指针错误的叫法。请联想一下代码段、数据段、栈段等。

- 大段错误：指针所指向的空间不存在
- 小段错误：指针指向的空间存在，但是访问权限受限
