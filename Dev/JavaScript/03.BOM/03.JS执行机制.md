# JS 执行机制

## JS执行队列

**单线程**

JavaScript语言的一大特点就是单线程，也就是，同一时间只能做一件事。这也是JS的使命所致。

所有的任务都需要排队，但其中有巧妙的设计

**同步和异步**

HTML5提出了web worker标准，允许js脚本创建多个线程。于是JS出现了同步和异步


- 同步任务：在主线程上执行，形成一个线程栈

- 异步任务（一般是回调函数）：异步任务read后（被监控），会被放到任务队列里面等待

**常见的异步任务**

异步任务是通过回调函数实现的

- 普通事件：click, resize 等
- 资源加载：load, error 等
- 定时器：setTimeout, setInterval

## JS执行机制


1. 主线程同步执行代码
2. 有注册回调函数时，将该任务转交给异步进程处理，并继续同步执行后续代码
3. 异步进程监控各个异步任务，只有事件被触发后，才会把对应的异步任务放入任务队列
4. 主线程执行栈为空后，会去检查任务队列，并把里面的任务取回到主线程执行栈运行
5. 重复步骤 4
