# 条件编译与配置文件

**配置文件的作用**

大型的c/c++工程往往有很多条件编译，如果都需要自己在源代码中一个一个修改相关宏来打开和关闭的话非常麻烦。此时就需要配置文件帮我们自动修改相应的宏，以打开和关闭相应的条件编译

**配置文件原理**

配置文件其实是一个脚本文件

- 修改配置文件，通过配置文件来决定定义哪些宏，删除哪些宏
- 执行配置文件，生成`config.h`，配置文件会向`config.h`中输入各种条件编译所需要的宏定义
- 编译程序，在源代码所有`.c`和`.h`中包含`config.h`，预编译时，就可以通过`config.h`中的宏来打开和关闭条件编译了

**实现配置文件的方法**

实现配置文件的方式有很多，不管是哪种做法，最终的目的都是为了生成一个`config.h`，并在`config.h`中定义相关的宏定义，以打开和关闭相应的条件编译。

1. 使用`makefile`文件来实现
2. 使用`configure.in`来实现

**makefile**

`makefile`文件主要作用是用于管理C工程项目中的所有`.c`和`.h`，以便让编译器更好的去编译所有的文件。
不过我们还可以让`makefile`附带的生成`config.h`头文件，也就是说生成`config.h`并不是`makefile`的主要作用。

如何得到`makefile`文件

- 自己手写一个
- 使用工具软件自动生成
- 实际开发中，大型c工程中的`makefile`都是自动生成的

**configure**

`configure.in`是一个典型的配置文件，同样的，这个配置文件的作用有很多，生成`config.h`只是其中的一个附带功能而已。
