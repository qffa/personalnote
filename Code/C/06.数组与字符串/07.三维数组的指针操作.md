# 三维数组的指针操作

## 三维数组的数组名相关含义

以`int buf[3][2][2]`为例

| Symbol   | Description                                         |
|:-------- |:--------------------------------------------------- |
| `buf`    | 1.代表整个数组。2.代表第0元素（个小二维数组）的指针 |
| `&buf`   | 三维数组的数组指针，类型`int (*)[3][2][2]`          |
| `*buf`   | 小二维数组第0个元素的指针，类型`int (*)[2]`         |
| `**buf`  | 小一维数组第0个元素的指针，类型`int *`              |
| `***buf` | 小一维数组第0个元素，类型`int`                      |

## 三维数组的访问

`buf[i][j][k]`这种形式，最终会转换为指针操作形式 `*(*(*(buf + i) + j) + k)`

两种方式等价

## 三维数组传参

**传二维数组指针**

传（二维数组）指针及维度

```
#include <stdio.h>

void fun (int m, int n, int z, int (*p)[n][z]) {
    int i=0, j=0, k=0;
    for (i=0; i<m; i++) {
        for (j=0; j<n; j++) {
            for (k=0; k<z; k++) {
                printf("%d%d%d ", i, j, k);
                printf("%d\n", p[i][j][k]);
            }
        }
    }
}

int main(void) {
    int buf[3][2][2] = {
        {{0, 1}, {2, 3}},
        {{4, 5}, {6, 7}},
        {{8, 9}, {10, 11}}
    };

    fun(3, 2, 2, buf);  //int (*)[2][2]

    return 0;
}
```

形参等价写法

```
void fun (int m, int n, int z, int p[m][n][z]);
void fun (int m, int n, int z, int p[][n][z]);     //m可以省略，但n和z不可以
```

**传其他指针**

```
fun1(*buf)
fun2(**buf)
fun3(&buf)
```

## 多维数组

4/5/6维数组的构建方式也是完全一样的，多维数组的核心规则就是"数组指针与第一个元素指针"的转换规则。

游戏开发中，三维、四维等以上多为数组可能会用到。
